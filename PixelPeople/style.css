/* VARIABLES */
:root { --bg:#121213; --panel:#121213; --muted:#8b93a7; --text:#e9edf4; --font:#121213;  }

/* GAME STYLES */
html,body{height:100%;margin:0;background:var(--bg);color:#e9edf4;font:16px/1.4 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;}
* { -webkit-tap-highlight-color: transparent; }

.wrap{max-width:520px;margin:0px auto;padding:0px;}
header{display:none}

button{
  appearance:none;border:1px solid #222838;border-radius:8px;
  padding:10px 14px;background:#171a21;color:#e9edf4;font-size:16px;
  cursor:pointer; touch-action:manipulation;
}
button:disabled{opacity:.6;cursor:not-allowed}
button#next.active{background:#123524;border-color:#1e4d32;color:#b7ffd1;}

#hint, #giveup{ background-color:#5B8341; padding:5px 10px; font-size:15px; border:0; border-radius:8px; color:#89C95B; }

.stage{background:var(--panel);border-radius:0px;padding:10px;display:grid;gap:10px;position:relative;}
.artbox{width:100%;max-width:500px;aspect-ratio:1/1;margin:0 auto;background:#fff url('pp_bgnd.jpg') center/cover no-repeat;border:1px solid #202636;border-radius:8px;overflow:hidden;position:relative;}
.artbox img{position:absolute;inset:0;width:90%;height:90%;padding: 5%;object-fit:contain;opacity:1;transition:opacity .28s ease;}

/* Limit artbox height on mobile screens */
@media (max-width: 600px) {
  .artbox { max-height: 340px; }
}

.result-overlay{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;pointer-events:none;z-index:2;}
.result{font-weight:600;padding:10px 12px;border-radius:8px;display:none;max-width:90%;text-align:center;transition:opacity .4s ease;}
.result.show{display:inline-block}
.result.good{background:#0f291a;border:1px solid #1e4d32;color:#b7ffd1}
.result.bad{background:#2a1416;border:1px solid #5a1e23;color:#ffc3c6}
.result.revealed{background:#2a2310;border:1px solid #5a4720;color:#ffe8a1}
.result.fading{opacity:0;}

.fab{position:absolute;bottom:10px;z-index:3;border-radius:8px;}
.fab.left{left:10px;}
.fab.right{right:10px;}

.col{display:grid;gap:10px;align-content:start}
.guess-row{display:grid;grid-template-columns:1fr auto;gap:10px}
#guess{appearance:none;border:2px solid #263048;border-radius:8px;padding:9px 13px;background:#171a21;color:#e9edf4;font-size:19px;line-height:1.2;touch-action:manipulation;text-transform: capitalize;}
#next{max-width:140px;border-radius:8px; background-color: #263048; border: 0px; color: #646c84;}

.level-bar{display:flex;align-items:center;gap:10px;color:#8b93a7;font-size:14px;flex-wrap:wrap;justify-content:center;text-align:center;background-color: var(--panel);padding-top: 7px; padding-bottom: 7px; border-bottom: 1px solid #424242;}
.pill{background:#1b2130;border:1px solid #263048;padding:6px 10px;border-radius:8px}
#homeBtn{cursor:pointer;user-select:none;outline:none;}
#homeBtn:focus{box-shadow:0 0 0 2px #86eefc;}
#levelLabel{cursor:pointer;user-select:none;outline:none;}
#levelLabel:focus{box-shadow:0 0 0 2px #86eefc;}

.level-cells{display:flex;gap:4px;align-items:center}
.cell{width:10px;height:22px;border-radius:2px;background:#23293a;box-sizing:border-box}
.cell.ok{background:#0e3a23;}
.cell.bad{background:#3a1b1d;}
.cell.active{box-shadow:0 0 0 1px #86eefc inset;}

/* ===== KEYBOARD ===== */
.kb-row{display:flex;justify-content:center;flex-wrap:nowrap;gap:5px;margin-bottom:5px;max-width:500px;margin-left:auto;margin-right:auto;}
.kb-key{flex:1;max-width:48px;padding:10px 0;border:1px solid #263048;background:#171a21;border-radius:5px;color:#e9edf4;cursor:pointer;text-align:center;user-select:none;font-weight: 600; font-size:16px;transition:background .2s;touch-action:manipulation;}
.kb-key:hover{background:#1f2637;}
.kb-key.enter,.kb-key.delete{max-width:none;}
.kb-key.space{flex:2;max-width:none;}

/* ===== HOME ===== */
.home{display:none;padding:10px;}

.home-header{
  background: #72E0FF;
  height: 320px;
  border-radius: 8px 8px 0px 0px;
}

.home.show{display:block;}
.home-card{border-radius:8px;display:block;gap:15px;text-align:center; height: calc(100vh - 100px);background-color: #89C95B;}

.home-labelnum {
  font-size: 18px;
  font-weight: 600;
  color: var(--font);
}
.home-labelnum span {
  color: var(--font);
  font-size: 18px;
  font-weight: 600;
}
.home-logo{display:grid;gap:8px;justify-items:center;}
.logo-mark{width:260px;height:auto;display:grid;place-items:center;padding-top: 45px;}
.logo-type{font-size:22px;font-weight:800;letter-spacing:.3px;}
.home-current{display:grid;gap:8px;justify-items:center; color: var(--font); padding-top: 15px;} 
.home-number{font-size:28px;font-weight:800;color: var(--font);}
.home-art{aspect-ratio:1/1;position:relative;overflow:hidden;width:100%;max-width:150px;margin-top: -110px; margin-bottom: 15px;}
.home-art img{position:absolute;inset:0;width:90%;height:90%;padding:5%;object-fit:contain;margin:auto;}
.home-actions{display:grid;gap:10px;justify-items:center;}
.home-actions button{width: 230px;border-radius:4px; background-color: #1A1A1A;font-weight: 500; border: 1px solid #414141;box-shadow: 0px 2px 0px 0px rgba(169,232,122,1);-webkit-box-shadow: 0px 2px 0px 0px rgba(169,232,122,1);-moz-box-shadow: 0px 2px 0px 0px rgba(169,232,122,1); }
.home-actions button:hover{background-color: #272728;}
.btn-link{display:inline-block;text-align:center;padding:8px 14px;border-radius:4px;background:#41FA9B;font-weight: 500;color:var(--panel);text-decoration:none;border:0;font-weight: 600;width: 200px;border: 1px solid #2BD877;box-shadow: 0px 2px 0px 0px rgba(122,181,80,1);-webkit-box-shadow: 0px 2px 0px 0px rgba(122,181,80,1);-moz-box-shadow: 0px 2px 0px 0px rgba(122,181,80,1); }
.btn-link:hover{background-color: #4dffa3;}

/* TOP BAR */
#levelLabel {
  display: inline-flex;
  align-items: center;
  gap: 6px;
}

#levelLabel .season-icon {
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

#levelLabel .season-icon svg {
  display: block;
  height: 14px;
  width: 14px;
  fill: currentColor;
}

#levelLabel .season-code {
  display: inline-flex;
  align-items: center;
}

/* SEASONS */
.season-summary {
  margin: 4px 0 10px;
  padding: 0 16px;
  font-size: 14px;
  color: var(--font);
  font-family: 'Courier New', Courier, monospace;
  font-weight: bold;
}

/* MODALS */
.modal{position:fixed;inset:0;display:none;place-items:center;z-index:1000;background:rgba(0,0,0,.5);}
.modal.show{display:grid;}
.modal-card{width:min(400px,80%);background:#0f1115;border:1px solid #23293a;border-radius:8px;padding:20px;position:relative;}
.modal-close{position:absolute;top:10px;right:10px;width:36px;height:36px;border-radius:8px;background:#171a21;border:1px solid #263048;color:#e9edf4;font-size:26px;line-height:17px;padding:8px;text-align:center;cursor:pointer;}
.modal-reset{position:absolute;top:10px;right:56px;height:36px;padding:8px 10px;border-radius:8px;background:#171a21;border:1px solid #263048;color:#e9edf4;cursor:pointer;font-size:14px;line-height:20px;}
.modal-reset:focus{outline:none;box-shadow:0 0 0 2px #86eefc;}
.modal-title{font-size:22px;font-weight:700;margin:0 0 8px 0;padding-right:46px;}
.score-blurb{margin:-2px 0 10px;color:#cbd5e1;font-size:13px;line-height:1.35;}
.modal-rows{display:grid;gap:8px;margin:12px 0 14px;}
.modal-row{display:flex;justify-content:space-between;color:#cbd5e1;}

.thumb-grid{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:10px;margin:8px 0 16px;}
.thumb{aspect-ratio:1/1;border:3px solid #2a3246;border-radius:8px;overflow:hidden;background:#0b0d12;position:relative;}
.thumb.ok{border-color:#1e4d32;}
.thumb.bad{border-color:#5a1e23;}
.thumb.locked img{filter:blur(30px) brightness(1);}
.thumb.locked .cap{opacity:.2;}
.thumb img{width:70%;height:70%;padding:5% 15% 25% 15%;object-fit:contain;display:block;}
.thumb .cap{position:absolute;left:6px;bottom:6px;right:6px;background:rgba(0,0,0,.55);color:#e5f3ff;font-size:11px;padding:3px 6px;border-radius:8px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;}
.modal-actions{display:flex;gap:10px;justify-content:flex-end;align-items:center;}
.note{font-size:12px;color:#8b93a7;margin-right:auto;width:50%;}
.confirm-text{color:#cbd5e1;margin:6px 0 16px;}

/* Touch-safety identical to your source */
.thumb, .thumb img { -webkit-touch-callout: none; -webkit-user-select: none; user-select: none; }
.thumb img { pointer-events: none; }
.thumb::before { content: ""; position: absolute; inset: 0; z-index: 1; }
.artbox, .artbox img#art { -webkit-touch-callout: none; -webkit-user-select: none; user-select: none; }
.artbox img#art { pointer-events: none; }
.artbox::before { content: ""; position: absolute; inset: 0; z-index: 1; }

/* CONFETTI (mobile friendly) */
.fx-confetti {
  position: fixed;
  inset: 0;
  pointer-events: none;
  overflow: hidden;
  z-index: 2000;
}

/* Each piece uses a short, simple fall animation */
.fx-confetti-piece {
  position: absolute;
  width: 7px;
  height: 12px;
  border-radius: 2px;
  opacity: 0;
  will-change: transform, opacity;
  animation: confetti-fall 0.55s ease-out forwards;
}

.fx-confetti-piece.small {
  width: 6px;
  height: 10px;
}

.fx-confetti-piece.big {
  width: 8px;
  height: 14px;
}

@keyframes confetti-fall {
  0% {
    transform: translateY(-12%);
    opacity: 1;
  }
  100% {
    transform: translateY(110%);
    opacity: 0;
  }
}